<!-- CPRG 210 Exercise 7
     Corinne Mullan
	 May 22, 2018 
	 index.html          -->
	 
<html>
	<head>
		<title>Welcome to Travel Experts</title>
		<link rel="stylesheet" type="text/css" href="reset.css">
		<link rel="stylesheet" type="text/css" href="style.css">
		<link href="https://fonts.googleapis.com/css?family=Kavivanar" rel="stylesheet"> 
		
		<script>
		
			/*  The following functions are used to load and display a series of images and
			descriptions and display them in a table.  The three arrays used for the image, descriptions 
			and associated URLs are declared as global variables so they can be accessed by all functions.  */
			var arrImages = new Array();
			var arrDescs = new Array();
			var arrURLs = new Array();
				
			/* Load the image files, descriptions and associated URLs that will appear in the table on the 
			main page.  Don't bother using a loop here, since the image files names and descriptions 
			must be entered individually.  */
			function loadImages() {
				
				arrImages[0] = new Image();
				arrImages[0].src = "images/stonehenge.png";
				
				arrImages[1] = new Image();
				arrImages[1].src = "images/paris.png";
				
				arrImages[2] = new Image();
				arrImages[2].src = "images/hawaii.png";
				
				arrImages[3] = new Image();
				arrImages[3].src = "images/safari.png";
				
				/* Set the width = 260px and height = 190px for all images for consistency (all images are close
				to this size, but not exactly the same. */
				for (var i = 0; i < arrImages.length; i++) {
					arrImages[i].width = 260;
					arrImages[i].height = 190;
				}

				// Load the image descriptions
				arrDescs[0] = "England";
				arrDescs[1] = "Paris";
				arrDescs[2] = "Hawaii";
				arrDescs[3] = "Africa";
				
				// Load the associated URLs
				arrURLs[0] = "http://www.english-heritage.org.uk/visit/places/stonehenge/";
				arrURLs[1] = "https://en.parisinfo.com/";
				arrURLs[2] = "https://www.hawaii-guide.com/";
				arrURLs[3] = "https://www.go2africa.com/tours-safaris";
			}
			
			// Build and display the table with the photos and descriptions
			function displayPhotoTable() {
			
				// First load the images and their descriptions and urls into the arrays
				loadImages();
			
				tablediv = document.getElementById("photoTable");
				
				// Create the table and header row
				var tbl = document.createElement("table");
				var thdr1 = document.createElement("th");
				var thdr1_txt = document.createTextNode("Image");
				var thdr2 = document.createElement("th");
				var thdr2_txt = document.createTextNode("Description");
					
				thdr1.appendChild(thdr1_txt);
				tbl.appendChild(thdr1);
				thdr2.appendChild(thdr2_txt);
				tbl.appendChild(thdr2);
				
				/* Create each row of the table, and append child element to their parent.
				Use the length of the arrDescs array to determine how many rows to add to the table.
				This assumes that the number of images in arrImages and the number of URLs in arrURLs matches the 
				number of descriptions in arrDescs. */
				for (var i = 0; i < arrDescs.length; i++) {
					var trow = document.createElement("tr");
					
					/* Create a cell in the table.  The cell will display the image, and will have a an event handler
					to handle mouse clicks.  The event handler is named openNewPage as it will open a new web page.  It
					is called as < ... onclick = "openNewPage(i)" ... > where i is the index of the row in the table.
					For example, openNewPage(this, 1) calls the openNewPage function for the second row in the table.  */
					var tdata1 = document.createElement("td");
					tdata1.innerHTML = "<div onclick='openNewPage(" + i + ")'><img src= '" + arrImages[i].src + "' width='" + arrImages[i].width + "' height = '" + arrImages[i].height + "'></div>";

					var tdata2 = document.createElement("td");
					var tdata2_txt = document.createTextNode(arrDescs[i]);
	
					tbl.appendChild(trow);
					trow.appendChild(tdata1);
					tdata2.appendChild(tdata2_txt);
					trow.appendChild(tdata2);
				}
				
				tablediv.appendChild(tbl);
			}
			
			/* The openNewPage(this, i) function is invoked when image in the (i+1)th row of the table is clicked.  This
			function will open the web page associated with the image in a new window (i.e., new browser tab), by using the 
			URL stored in the array element arrURLs[i].  The new window will close after 5 seconds = 5000 milliseconds.  Although
			this would not be desired behaviour in a real website, it illustrates the use of the setTimeout JavaScript function.  */
			function openNewPage(i) {
				var newWindow = window.open(arrURLs[i]);
				
				// Bug:  newWindow.close() seems to work in Firefox and Chrome but not IE
				var timer = setTimeout(function(){newWindow.close();}, 5000);
			}

		</script>
		
	</head>
	
	<body onload="displayPhotoTable()">
		<header>
			<h1><img id="logo" src="images/logo.jpg">Welcome to Travel Experts</h1>
		</header>
		
		<hr class="hline">
		
		<div>			
			<img src="images/beach.png" class="large_img"><img src="images/canmap.gif" class="large_img" width="350" height="240">
			<img src="images/photo5.gif" class="large_img" width="150" height="265">
		</div>
		
		<div id="photoTable">
			<h2>Some of our destinations...</h2>
			<br>
		</div>

		<br>
		<br>
		
		<nav>
			<a href="contact.html"><img class="small_img" src="images/cell.gif" width="32" height="100">Contact</a>		
			<a href="register.html"><img class="small_img" src="images/pen.gif" width="10" height="100">Register</a>
		</nav>
		
		<hr class="hline">
								
		<footer>
			&copy; 2018 Travel Experts
		</footer>
		
	</body>
	

</html>